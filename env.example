PORT=8787
# One or many (comma-separated):
# CLIENT_ORIGIN=https://dashboard.rapidcallai.com,http://localhost:5173
CLIENT_ORIGIN=http://localhost:5173

# LiveKit Cloud project credentials
LIVEKIT_URL=
LIVEKIT_API_KEY=
LIVEKIT_API_SECRET=

# --- Twilio inbound -> LiveKit SIP bridge ---
# LiveKit SIP endpoint (from LiveKit Cloud Project settings), example:
# vjnxecm0tjk.sip.livekit.cloud
LIVEKIT_SIP_ENDPOINT=

# Shared secret for your LiveKit Agent to call internal endpoints (create/end calls, post metrics).
# Set the same value in python-agent env as AGENT_SHARED_SECRET.
AGENT_SHARED_SECRET=thisisstrongsecret

# --- Dashboard Voice Configuration previews (optional) ---
# LiveKit ElevenLabs docs use ELEVEN_API_KEY; we also accept ELEVENLABS_API_KEY for backward compat.
ELEVEN_API_KEY=
ELEVENLABS_API_KEY=
CARTESIA_API_KEY=

# --- AI prompt generation (Generate wizard) ---
OPENAI_API_KEY=
OPENAI_GENERATE_MODEL=gpt-4.1-mini
OPENAI_EVAL_MODEL=gpt-4.1-mini

# Used to mint short-lived, token-gated recording playback URLs for the browser (so <audio> can stream without Authorization headers).
# If unset, we fall back to AGENT_SHARED_SECRET.
RECORDING_PLAYBACK_SECRET=

# Optional: override the public base URL used when generating absolute playback URLs.
# Example: https://api.rapidcallai.com
PUBLIC_API_BASE_URL=https://api.rapidcallai.com

# --- Twilio (subaccount-per-workspace) ---
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=

# --- Outbound Calling ---
# Max combined concurrent calls (inbound + outbound) per workspace.
OUTBOUND_MAX_TOTAL=20
OUTBOUND_POLL_INTERVAL_MS=2000
OUTBOUND_BASE_BACKOFF_SEC=60
OUTBOUND_AGENT_JOIN_TIMEOUT_MS=15000
LIVEKIT_OUTBOUND_AGENT_NAME=

# PostgreSQL (RDS)
# Example:
# DATABASE_URL=postgresql://postgres:password@rapidcallai-database.xxxxx.eu-central-1.rds.amazonaws.com:5432/rapidcallai
DATABASE_URL=
DATABASE_SSL=true

# --- LiveKit Egress -> S3 (required to enable recordings) ---
# Egress uploads: s3://EGRESS_S3_BUCKET/calls/<callId>.mp3
EGRESS_S3_BUCKET=
EGRESS_S3_REGION=
EGRESS_S3_ACCESS_KEY=
EGRESS_S3_SECRET=
# Optional (for S3-compatible storage like MinIO)
EGRESS_S3_ENDPOINT=
EGRESS_S3_FORCE_PATH_STYLE=false

# --- Metrics (Prometheus) ---
# Exposes GET /metrics when token is set.
METRICS_BEARER_TOKEN=

# ============================================================
# BILLING RESET (Trial credits + Stripe + OpenMeter)
# ============================================================

# --- Pricing (Retell-style) ---
# Base platform price (Plan B)
BASE_PRICE_USD_PER_MIN=0.10
DEFAULT_LLM_MODEL=gpt-5-mini

# Included tokens per billed minute, and token overage pricing
INCLUDED_TOKENS_PER_MIN=2000
TOKEN_OVERAGE_USD_PER_1K=0.002

# Per-minute model surcharge (charged only when model != DEFAULT_LLM_MODEL)
# Example:
# LLM_SURCHARGE_JSON={"gpt-5-mini":0,"gpt-5":0.03,"gpt-4.1":0.04,"gpt-4o":0.05}
LLM_SURCHARGE_JSON={"gpt-5-mini":0}

# Telephony (PAID only)
TELEPHONY_MARKUP_RATE=0.20
TELEPHONY_USD_PER_MIN=0.015

# Phone number monthly fee (PAID only; also requires payment method to purchase)
PHONE_NUMBER_MONTHLY_FEE_USD=2.00

# --- Trial credits (tracked in OUR DB; no Stripe billing during trial) ---
TRIAL_CREDIT_USD=20
TRIAL_ALLOW_PSTN=false
TRIAL_ALLOW_NUMBER_PURCHASE=false

# --- OpenMeter (metering; enabled only after upgrade/paid) ---
OPENMETER_API_URL=
OPENMETER_API_KEY=
OPENMETER_SOURCE=urn:voice-platform
# Trial credits in OpenMeter require an existing entitlement (feature key or entitlement id).
# Example: OPENMETER_CREDIT_ENTITLEMENT_KEY=usd_credit
OPENMETER_CREDIT_ENTITLEMENT_KEY=

# --- Stripe (payments; no billing until upgrade) ---
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Metered prices (Stripe Price IDs) configured in your Stripe dashboard
STRIPE_PRICE_ID_BASE_MINUTES=
STRIPE_PRICE_ID_MODEL_UPGRADE_MINUTES=
STRIPE_PRICE_ID_TOKEN_OVERAGE=
STRIPE_PRICE_ID_TELEPHONY_MINUTES=
STRIPE_PRICE_ID_PHONE_NUMBER_MONTHLY=


